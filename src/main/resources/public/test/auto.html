<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="content-type" content="text/html; charset=UTF-8">
<meta name="apple-mobile-web-app-capable" content="yes" />
<link type="text/css" rel="stylesheet" href="css/auto.css" />
<title>ARES互联网平台-回归测试工具</title>
<link type="text/css" rel="stylesheet" href="css/frozen.css?v=1" />
<link rel="stylesheet" href="css/all.css">
<link rel="stylesheet" href="css/report.css">
<script src="js/jquery-1.8.2.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/plus.js"></script>
<script src="js/menu.js"></script>
<script src="js/juicer-min.js"></script>
<script src="js/test-case.js"></script>
<script src="js/auto.js"></script>
<style type="text/css">
#REPORT_PANEL {
	display: none;
}

@media print {
	#REPORT_PANEL {
		padding: 10px;
		display: block;
		width: 1024px;
	}
	#TEST_PANEL {
		display: none
	}
}

body {
	background: #eee;
}

input {
	padding-left: 4px;
	line-height: 25px;
}

em {
	color: #333; 
	min-width: 120px;
	width: 15%;
}

H1 {
	font-size: 16px;
}

.hiden {
	display: none;
}

#TRAN_AREA button {
	width: 250px;
	text-align: left;
	padding: 4px 4px;
	overflow-x: hidden;
	text-overflow: ellipsis;
}

button.selected {
	background: #fff;
}

.form * {
	line-height: 25px;
	text-valign: middle;
}
.total-bar{
	background: #f4f4f4; padding: 5px;
}


</style>
</head>
<body>
	<!-- 测试报告 -->
	<div id="REPORT_PANEL" align="center"></div>
	<!-- 测试面板 -->
	<div id="TEST_PANEL" align="center">
		<div id="TRAN_AREA" align="center"></div>
		<div style="padding: 10px 20px;">
			<div align="left">
				<button onclick="showOrHideMenus()" title="全展开|全闭合">+|-</button>
				<button onclick="reload()" title="加载测试数据">场景过滤</button>
				<input type="text" id="filter" size="15" placeholder="场景过滤" value="" style="border: 1px; background-color: #fff;">
				<button id="btnRun" onclick="initRunDatas(this)">运行</button>
				<button onclick="stopRunDatas(this)">停止</button>
				<button onclick="clearStatus()" title="清理状态">清理</button>
				<button onclick="report()" title="导出测试报告">导出</button>
				<hr />
			</div>
			<div align="left" class="wrap">
				<div id="trans-info" class="sectionLeft trans-info">
					<div id="YYM/01">
						<div class="text" onclick="">【YYM/00】测试场景描述</div>
						<div class="items">
							<div id="FIle_T0001_1" class="rst-success">XX 交易</div>
							<div id="FIle_T0001_1" class="rst-success">XX 交易</div>
						</div>
					</div>
				</div>
				<div class="sectionRight">
					<div class="total-bar" >
						<span class="totalTrans">
							交易数[<i>0</i>] ;
						</span>
						<span class="totalRuns">
							可执行交易数[<i>0</i>] ;
						</span>
						<span class="runtime">
							已运行[<i>0</i>] ;
						</span>
						<span class="errors">
							错误[<i>0</i>]
						</span>
					</div>
					<div class="ui-form ui-border-t">
						<form action="#">
							<div class="ui-form-item ui-form-item-show ui-form-item-link ui-border-b">
								<label for="#">交易名称</label>
								<input id="text_trans_name" type="text" value="" readonly>
							</div>
							<div class="ui-form-item ui-form-item-show ui-border-b">
								<label for="#">交易路径</label>
								<input id="text_trans_url" type="text" value="">
							</div>
							<div class="ui-form-item ui-form-item-show ui-border-b">
								<label for="#">数据文件</label>
								<input id="text_data_file" type="text" value="">
							</div>
							<div class="ui-form-item ui-form-item-show ui-textarea ui-border-b">
								<label for="#">测试数据</label>
								<textarea id="text_trans_request" placeholder=""></textarea>
							</div>
							<div class="ui-form-item ui-form-item-show ui-textarea ui-border-b">
								<label for="#">响应数据</label>
								<textarea id="text_trans_response" placeholder=""></textarea>
							</div>
							<div class="ui-form-item ui-form-item-show ui-border-b">
								<label for="#">执行结果</label>
								<input id="text_result" type="text" value="">
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/juicer" id="CaseTpl">
	{@each datas as item,index}
		<div data-case="${item.code}" class="test-case">
			<div class="text" onclick="showOrHideItems(this)"><i>${index}</i> [<em>${item.code}]</em> ${item.desc}</div>
			<div class="items"></div>
		</div>
	{@/each} 
</script>
	<script type="text/juicer" id="CaseItemTpl">
	{@each datas as item}
		<div onclick="showTestDetail(this.id)" id="${item.FILE}"><i>--</i> ${item.URL}  ${item.name} </div>
	{@/each} 
</script>
	<script type="text/juicer" id="ReportTpl">
<div>
<div class="title-bar">
	<h1>交易回归测试报告</h1>
</div>
<div class="total-bar">
	<div class="totalRuns">
		<p>交易总数</p>
		<h1>${total}</h1>
	</div>
	<div class="runtime">
		<p>已运行</p>
		<h1>${oks}</h1>
	</div>
	<div class="errors">
		<p>错误</p>
		<h1>${errors}</h1>
	</div>
</div>
{@each datas as tranItem,index}

<div align="left"><h2>${index}. ${tranItem.menu.name}</h2></div>
<table class="trans-table">
	<tr><td width="150">交易路径</td><td>${tranItem.URL}</td></tr>
	<tr><td>文件路径</td><td></td></tr>
	<tr><td>执行结果</td><td><h3>{@if tranItem.result}<green class="h3">成功</green>{@else}<red class="h2">失败</ted>{@/if} 耗时:${tranItem.time} 毫秒</h3></td></tr>
	<tr><td>请求数据</td>
	<td style="padding:5px;">${tranItem.CONTENT}</td></tr>
	<tr><td>响应数据</td>
	<td style="padding:5px;">${tranItem.response}</td></tr>
</table> 
<hr>
{@/each}
</div>  
</script>
</body>
</html>
